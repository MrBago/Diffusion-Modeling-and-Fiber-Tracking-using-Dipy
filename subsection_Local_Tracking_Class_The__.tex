\subsection{Local Tracking Class}
    The local tracking class implements the basic logic of the local fiber tracking algorithm. In the heart of the local tracking class is the main tracking loop. The main tracking loop uses a direction getter, a tissue classifier, and a seed to produce half a streamline. Because of antipodal symmetry, each seed should be tracked in two opposing directions and the results joined to produce each streamline. The algorithm of the loop is described here in psudo-code:
\begin{lstlisting}[language=python]
# Main tracking loop.
point = seed
streamline = [point]
while tissue_class == TRACKPOINT:
    direction = direction_getter.get_direction(point, direction)
    point = step(point, direction)
    tissue_class = tissue_classifier.check_point(point)
    if tissue_class != OUTSIDEIMAGE:
        streamline.append(point)
if tissue_class != INVALIDPOINT:
    yield streamline
\end{lstlisting}

\begin{lstlisting}[language=python]
# Tracking algorithm applied to each seed.
for seed_direction in direction_getter.get_directions(seed):
    first_half = track seed along seed_direction
    second_half = track seed along -seed_direction
    if first_half and second_half do not end with INVALIDPOINT:
        yield first_half + reverse(second_half)
\end{lstlisting}
